   string text = txtBarcode.Text ?? string.Empty;

   // Split all lines, trim spaces, remove empty ones
   var lines = text.Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)
                   .Select(x => x.Trim())
                   .Where(x => !string.IsNullOrEmpty(x))
                   .ToList();

   // Add commas only between lines (not the last one)
   for (int i = 0; i < lines.Count; i++)
   {
       if (i < lines.Count - 1 && !lines[i].EndsWith(","))
           lines[i] += ",";
   }

   // Join lines back
   txtBarcode.Text = string.Join(Environment.NewLine, lines);

.net maui code

<ContentPage
    x:Class="MauiBarcodeSender.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Barcode Sender"
    BackgroundColor="{DynamicResource PageBackgroundColor}">

    <VerticalStackLayout Padding="20" Spacing="15">

        <!--  Select PC  -->
        <Label
            FontSize="16"
            Text="Select PC:"
            TextColor="{DynamicResource TextColor}" />
        <Picker
            x:Name="pcPicker"
            Title="No PCs found"
            BackgroundColor="{DynamicResource FrameBackgroundColor}"
            TextColor="{DynamicResource TextColor}" />

        <!--  Enter barcode  -->
        <Label
            FontSize="16"
            Text="Enter or Scan Barcode:"
            TextColor="{DynamicResource TextColor}" />
        <Grid>
            <Entry
                x:Name="txtBarcode"
                BackgroundColor="{DynamicResource FrameBackgroundColor}"
                Placeholder="Enter barcode"
                PlaceholderColor="{DynamicResource PlaceholderColor}"
                TextColor="{DynamicResource TextColor}" />
            <!--  Barcode icon on the left  -->
            <Label
                Margin="10,0,0,0"
                FontSize="18"
                HorizontalOptions="Start"
                Text="ðŸ“·"
                VerticalOptions="Center" />
        </Grid>

        <!--  Buttons with icons  -->
        <Button
            BackgroundColor="{DynamicResource DiscoverButtonBackground}"
            Clicked="OnDiscoverClicked"
            CornerRadius="10"
            FontAttributes="Bold"
            HeightRequest="50"
            Text="ðŸ” Discover PCs"
            TextColor="{DynamicResource ButtonTextColor}" />

        <Button
            BackgroundColor="{DynamicResource SendButtonBackground}"
            Clicked="OnSendClicked"
            CornerRadius="10"
            FontAttributes="Bold"
            HeightRequest="50"
            Text="ðŸ“¤ Send Barcode"
            TextColor="{DynamicResource ButtonTextColor}" />

        <!--  Status label  -->
        <Label
            x:Name="lblStatus"
            FontSize="14"
            Text="Status: Idle"
            TextColor="{DynamicResource StatusTextColor}" />
    </VerticalStackLayout>
</ContentPage>



back code

using System;
using System.Collections.Generic;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Maui.Controls;

namespace MauiBarcodeSender
{
    public partial class MainPage : ContentPage
    {
        private const int DISCOVERY_PORT = 5051;
        private const int BARCODE_PORT = 5050;

        public MainPage()
        {
            InitializeComponent();
        }

        private async void OnDiscoverClicked(object sender, EventArgs e)
        {
            lblStatus.Text = "ðŸ”Ž Discovering PCs...";
            pcPicker.Items.Clear();
            List<(string ip, string name)> foundPCs = new List<(string, string)>();

            using (UdpClient client = new UdpClient())
            {
                client.EnableBroadcast = true;
                byte[] data = Encoding.UTF8.GetBytes("DISCOVER");
                IPEndPoint broadcastEP = new IPEndPoint(IPAddress.Broadcast, DISCOVERY_PORT);

                await client.SendAsync(data, data.Length, broadcastEP);

                var start = DateTime.Now;
                while ((DateTime.Now - start).TotalSeconds < 1) // wait 1 second
                {
                    if (client.Available > 0)
                    {
                        var result = await client.ReceiveAsync();
                        string pcName = Encoding.UTF8.GetString(result.Buffer);
                        string ip = result.RemoteEndPoint.Address.ToString();
                        if (!foundPCs.Exists(x => x.ip == ip))
                            foundPCs.Add((ip, pcName));
                    }
                    await Task.Delay(50);
                }
            }

            if (foundPCs.Count == 0)
            {
                lblStatus.Text = "âŒ No PCs found.";
            }
            else
            {
                foreach (var pc in foundPCs)
                    pcPicker.Items.Add($"{pc.name} ({pc.ip})");

                lblStatus.Text = $"âœ… Found {foundPCs.Count} PC(s).";
            }
        }

        private async void OnSendClicked(object sender, EventArgs e)
        {
            string barcode = txtBarcode.Text?.Trim();
            if (pcPicker.SelectedItem == null)
            {
                await DisplayAlert("Error", "Please select a PC first.", "OK");
                return;
            }
            if (string.IsNullOrWhiteSpace(barcode))
            {
                await DisplayAlert("Error", "Please enter or scan a barcode.", "OK");
                return;
            }

            string selected = pcPicker.SelectedItem.ToString();
            string ip = selected.Substring(selected.LastIndexOf('(') + 1).Trim(')');

            try
            {
                using (TcpClient client = new TcpClient())
                {
                    await client.ConnectAsync(ip, BARCODE_PORT);
                    byte[] data = Encoding.UTF8.GetBytes(barcode);
                    await client.GetStream().WriteAsync(data, 0, data.Length);
                }

                lblStatus.Text = $"âœ… Sent '{barcode}' to {selected}";
                lblStatus.TextColor = Colors.Green;
                txtBarcode.Text = "";
            }
            catch (Exception ex)
            {
                lblStatus.Text = $"âŒ Error: {ex.Message}";
                lblStatus.TextColor = Colors.Red;
            }
        }
    }
}



windows app

using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace BarcodeReceiver
{
    public partial class Form1 : Form
    {
        private const int DISCOVERY_PORT = 5051;
        private const int BARCODE_PORT = 5050;

        public Form1()
        {
            InitializeComponent();
            StartUdpListener();
            StartTcpListener();
        }

        private async void StartUdpListener()
        {
            UdpClient udpListener = new UdpClient(DISCOVERY_PORT);
            AppendLog("ðŸ–¥ï¸ UDP Discovery Listener started...");

            while (true)
            {
                try
                {
                    var result = await udpListener.ReceiveAsync();
                    string message = Encoding.UTF8.GetString(result.Buffer);

                    if (message == "DISCOVER")
                    {
                        string machineName = Environment.MachineName;
                        byte[] response = Encoding.UTF8.GetBytes(machineName);
                        await udpListener.SendAsync(response, response.Length, result.RemoteEndPoint);

                        AppendLog($"ðŸ“¶ Discovery request from {result.RemoteEndPoint.Address} - replied with {machineName}");
                    }
                }
                catch (Exception ex)
                {
                    AppendLog($"âŒ UDP Error: {ex.Message}");
                }
            }
        }

        private async void StartTcpListener()
        {
            TcpListener tcpListener = new TcpListener(IPAddress.Any, BARCODE_PORT);
            tcpListener.Start();
            AppendLog("ðŸ–¥ï¸ TCP Barcode Listener started...");

            while (true)
            {
                try
                {
                    var client = await tcpListener.AcceptTcpClientAsync();
                    _ = HandleClientAsync(client);
                }
                catch (Exception ex)
                {
                    AppendLog($"âŒ TCP Error: {ex.Message}");
                }
            }
        }

        private async Task HandleClientAsync(TcpClient client)
        {
            var stream = client.GetStream();
            byte[] buffer = new byte[1024];
            int bytesRead = await stream.ReadAsync(buffer, 0, buffer.Length);
            string barcode = Encoding.UTF8.GetString(buffer, 0, bytesRead);

            //AppendLog($"{barcode}");

            txtLog.Text = barcode;
            client.Close();
        }

        private void AppendLog(string message)
        {
            if (txtLog.InvokeRequired)
            {
                txtLog.Invoke(new Action(() => txtLog.AppendText(message + Environment.NewLine)));
            }
            else
            {
                txtLog.AppendText(message + Environment.NewLine);
            }
        }
    }
}

